#include <stdio.h>
#include <stdlib.h>

// COMPILE WITH: gcc -fno-stack-protector simple_exploit.c

// Generate random password
void getPasswordForUsername(char* username, char* password) {
  srand(time(0));
  for (int i = 0; i < 15; i++) {
    password[i] = 'A' + rand() % 26;
  }
  password[15] = NULL;
}

int main() {
  char username[16];
  char password[16];
  char input[16];

  printf("Enter username:\n");
  gets(username);

  getPasswordForUsername(username, password);

  printf("Enter password:\n");
  gets(input);

  printf("input: %s\n", input); // debug print out
  printf("pw: %s\n", password); // debug print out

  if (strncmp(input, password, 16) == 0) {
    printf("Success!");
  } else {
    printf("Failure!");
  }
}